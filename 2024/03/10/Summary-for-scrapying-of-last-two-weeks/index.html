<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Summary for scrapying of last two weeks | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="2024-03-10 20:54 The most early version of street view just closed its website panel in 2023, I very treasure that data and I don’ t know when the only api in the app will close.So I dive into frida h">
<meta property="og:type" content="article">
<meta property="og:title" content="Summary for scrapying of last two weeks">
<meta property="og:url" content="http://example.com/2024/03/10/Summary-for-scrapying-of-last-two-weeks/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="2024-03-10 20:54 The most early version of street view just closed its website panel in 2023, I very treasure that data and I don’ t know when the only api in the app will close.So I dive into frida h">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-03-10T12:54:18.000Z">
<meta property="article:modified_time" content="2024-03-10T12:59:35.114Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Summary-for-scrapying-of-last-two-weeks" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/10/Summary-for-scrapying-of-last-two-weeks/" class="article-date">
  <time class="dt-published" datetime="2024-03-10T12:54:18.000Z" itemprop="datePublished">2024-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Summary for scrapying of last two weeks
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>2024-03-10 20:54</p>
<p>The most early version of street view just closed its website panel in 2023, I very treasure that data and I don’ t know when the only api in the app will close.<br>So I dive into frida hook as soon as the beginning from sketch, for before this I never think scrapying as too fancy tech.<br>At first, I only knew the app still had the street view, so I set up firda for my cp713 and flashed Redmi2 with Android 8 and magisk. However, I connected the frida with adb but it always throw error about the port was occupied. Then I tried the early version of the app and tried the Android x86, which all failed to connect with frida. Finally, I found httpcannary could capture the requests and responses just in the Android.<br>So I switched to httpcannary, again from sketch, for I haven’ t learned anything about Network. At first, I just looked the results, trying to find pictures directly. By the wway, I even searched the <a target="_blank" rel="noopener" href="http://www.archive.org/">www.archive.org</a>, it seems only captured the html files. By chance I finally an 60x60 res picture. Surprising and motivated, I began to check that HTTP request and response. This is my first time to check out HTTP communication and Web tessting, so at first I didn’t know what the “headers” mean. </p>
<p>Along the process, I really searched a lot and learned a lot, which is quite enjoyable. Finding the first image, I just know if I could find the url, then I could find the data. So I checked the urls to surprisingly find they all had same params.<br>Then I searched the urls and params to find there was an API of the street view in 2020 and it was closed now. But I happened to find in a web page which still offered the api to request the id of the street view. At the same time, I found a new url of street view in a blog with 512x512 res.<br>So I began to search for how to scrap these with python, for again I haven’ t learned web API, HTML, XML, Json and anything about scraping. I only learned python when I make a script for doing vocabulary homework and Kaggle.</p>
<p>From sketch, I learned from the blogs, searching all the times to make my first scraping from testing web page, finding the range of the pictures for its division method.<br>At first, without any knowledge about geography, I wanted to have four points’ lat and lng to loop all the points, for the street view id is encoding by lat and lng through the API. Soon I was confused by the huge number of loops, because the number of the decimal of the lat and lng is all 23, even for a small street, the number of loops has proceed 13.<br>Then I used the less number of decimal and selected manually to get the id_list, for it is relatively easy to use selenium to capture the image with the url as long as id is specified.<br>I also tried using requests to see whether I could directly get the image, but the response is hard to decode in the form of &#x2F;x, which I haven’ t learnd either and I didn’ t find any tools or packages.<br>Fotuately, selenium was good at capturing elements with driver. Then I used selenium to use the API page I found to simulate click to get id_list. It confused me that the value of id_element is blank as long as option(‘headless’). I searched and tried to add more options such as User-Agent but none of them worked, so I think it isn’t because the anti-scrapying detector, at least not in items of options.<br>So now descipite of the memory consumption of web pages, I finally could automatically download the street view pictures.</p>
<p>I think it is not proper to post the code and url online. Although my Bandwidth usage is within 1Mbps, it maybe problem if it is widely used. And since the API is declared closed, I think the web page is just a leak.<br>However, I also wonder how this street view data will be handled. Since they closed the street view service in web and latest app, it seems they are going to close it. But these photos are from 2014-2015, at which time mobile phones were weak at taking photos. So I think these photos are more valuable than the cuurrent street view data.</p>
<p>For me, this is my entrance of Network and scraping, the process of finding urls and proagramming is fun and really made me learn a huge new technologies. Also it brodan and enhanced my knowledge of python.<br>Also, this is the first time I have a hundround thousand amount of dataset of my own.<br>By the way, I found click process kinda interesting. At the beginning, it is common to think of iterate, and then tunning the step param just like Learning models will tell the most efficient choice.<br>Also for the first time I learned about cloud VPS and ECS with hardware efficiency of scraping and the anti-scraping.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/03/10/Summary-for-scrapying-of-last-two-weeks/" data-id="cltljsipp0001b4va7ka30ldt" data-title="Summary for scrapying of last two weeks" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/03/10/How-to-scrawl-the-news-data-completely/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          How to scrawl the news data completely
        
      </div>
    </a>
  
  
    <a href="/2024/03/10/Draft-to-do-list/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Draft to-do list</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/10/How-to-scrawl-the-news-data-completely/">How to scrawl the news data completely</a>
          </li>
        
          <li>
            <a href="/2024/03/10/Summary-for-scrapying-of-last-two-weeks/">Summary for scrapying of last two weeks</a>
          </li>
        
          <li>
            <a href="/2024/03/10/Draft-to-do-list/">Draft to-do list</a>
          </li>
        
          <li>
            <a href="/2024/03/10/At-the-beginning/">At the beginning</a>
          </li>
        
          <li>
            <a href="/2024/03/10/Finally-not-404/">Finally not 404</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>